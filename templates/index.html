<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>BIOMASS CALCULATOR</title>
    <!-- Favicon-->
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', filename='images/favicon.ico') }}"
    />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link
      href="{{ url_for('static', filename='css/styles.css') }}"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
  </head>
  <body>
    <div class="d-flex" id="wrapper">
      <!-- Sidebar-->
      <div class="border-end bg-white" id="sidebar-wrapper">
        <div
          class="sidebar-heading border-bottom bg-light"
          style="text-align: center"
        >
          <a id="homeBtn" href="#!">
            <img
              src="{{ url_for('static', filename='images/Logo.svg.png') }}"
              alt="Icon description"
              style="height: 100px; width: 100px; display: block; margin: auto"
            />
          </a>
        </div>
        <div class="list-group list-group-flush">
          <a
            class="list-group-item list-group-item-action list-group-item-light p-3"
            id="uploadBtn"
            href="#!"
            >Upload Biomass Data</a
          >
          <a
            class="list-group-item list-group-item-action list-group-item-light p-3"
            id="seeDataBtn"
            href="#!"
            >Analyze Biomass Data</a
          >
          <a
            class="list-group-item list-group-item-action list-group-item-light p-3"
            id="uploadBtn"
            href="#!"
            >AI Analysis</a
          >
        </div>
      </div>
      <!-- Page content wrapper-->
      <div id="page-content-wrapper">
        <!-- Top navigation-->
        <nav
          class="navbar navbar-expand-lg navbar-light bg-light border-bottom"
        >
          <div class="container-fluid" id="landingPage">
            <button
              class="btn btn-primary"
              id="sidebarToggle"
              style="background: none; border: none"
            >
              <img
                src="{{ url_for('static', filename='images/sidebar.png') }}"
                alt="Image description"
                style="height: 35px; width: 35px; margin: 5px"
              />
            </button>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                  <a class="nav-link" id="homeBtn2" href="#!">Home</a>
                </li>
                <li class="nav-item dropdown">
                  <a
                    class="nav-link dropdown-toggle"
                    id="navbarDropdown"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                    >Username</a
                  >
                  <div
                    class="dropdown-menu dropdown-menu-end"
                    aria-labelledby="navbarDropdown"
                  >
                    <a class="dropdown-item" id="profileBtn2" href="#!"
                      >Profile</a
                    >
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#!">Safe Logout</a>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </nav>
        <!-- Page content-->
        <div class="container-fluid" id="pageContent">
          <div id="homeContent" style="display: none">
            <h1 class="mt-4">BIOMASS CALCULATOR</h1>
            <p>
              Please upload your csv files from "Upload Biomass Data" and you
              can see it on "Inspect Biomass Data"
            </p>
            <p>
              Please double-check that your csv file doesn't contain
              non-relevant data
            </p>
            <form action="{{ url_for('delete_all') }}" method="post">
              <input type="submit" value="Delete All CSV Data" />
            </form>
          </div>

          <div id="seeDataContent" style="display: none">
            <div class="container">
              <h1 class="mt-4 text-center">Biomass Data</h1>
              <p class="text-center">
                Here you can see biomass data's from csv files
              </p>
              {% for email in emails %}
              <table class="table table-striped mx-auto">
                <tbody>
                  <tr>
                    <td>
                      {% if email.filename %} {% if
                      email.filename.endswith('.csv') %}
                      <div class="scrollable-box">
                        <table class="table table-sm">
                          <thead>
                            {% if email.csv_data %}
                            <tr class="table-header">
                              {% for cell in email.csv_data[0] %}
                              <th>{{ cell }}</th>
                              {% endfor %}
                            </tr>
                            {% endif %}
                          </thead>
                          <tbody>
                            {% for row in email.csv_data[1:] %}
                            <tr>
                              {% for cell in row %}
                              <td>{{ cell }}</td>
                              {% endfor %}
                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                      {% endif %} {% else %} No attachment {% endif %}
                    </td>
                  </tr>
                </tbody>
              </table>
              <table class="table table-striped mx-auto">
                <tr>
                  <td style="text-align: center">
                    <strong>Sample ID:</strong> {{ email.sample_id }}
                  </td>
                </tr>
                <tr>
                  <td style="text-align: center">
                    <strong>Serial Number:</strong> {{ email.serial_number }}
                  </td>
                  -
                </tr>

                <tr>
                  <td style="text-align: center">
                    <strong>Sample Weight:</strong> {{ email.sample_weight }}
                  </td>
                </tr>
                <tr>
                  <td style="text-align: center">
                    <strong>Heat Interval:</strong> {{ email.heat_interval }}
                  </td>
                </tr>
                <tr>
                  <td style="text-align: center">
                    <strong>Heat Increase Rate:</strong> {{
                    email.heat_increase_rate }}
                  </td>
                </tr>
              </table>
              {% endfor %}
            </div>
          </div>

          <div id="uploadDataContent" style="display: none">
            <h1 class="mt-4">Upload Data</h1>
            <p>Write the descriptive data for the table and upload it</p>
            <form
              method="POST"
              action="/send_email"
              enctype="multipart/form-data"
              class="row g-3"
            >
              <div class="col-12">
                <label for="sample_id" class="form-label">Sample ID</label>
                <input
                  class="form-control"
                  id="sample_id"
                  name="sample_id"
                  placeholder="Sample ID"
                />
              </div>

              <div class="col-12">
                <label for="serial_number" class="form-label"
                  >Serial Number</label
                >
                <input
                  class="form-control"
                  id="serial_number"
                  name="serial_number"
                  placeholder="Serial Number"
                />
              </div>
              <div class="col-12">
                <label for="sample_weight" class="form-label"
                  >Sample Weight</label
                >
                <input
                  class="form-control"
                  id="sample_weight"
                  name="sample_weight"
                  placeholder="Sample Weight"
                />
              </div>
              <div class="col-12">
                <label for="heat_interval" class="form-label"
                  >Heat Interval</label
                >
                <input
                  class="form-control"
                  id="heat_interval"
                  name="heat_interval"
                  placeholder="Heat Interval"
                />
              </div>
              <div class="col-12">
                <label for="heat_increase_rate" class="form-label"
                  >Heat Increase Rate</label
                >
                <input
                  class="form-control"
                  id="heat_increase_rate"
                  name="heat_increase_rate"
                  placeholder="Heat Increase Rate"
                />
              </div>
              <div class="col-12">
                <label for="file" class="form-label">Attach file</label>
                <input class="form-control" type="file" id="file" name="file" />
              </div>
              <div class="col-12">
                <button type="submit" class="btn btn-primary">Upload</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="{{ url_for('static', filename='js/scripts.js')}}"></script>
  </body>
</html>
